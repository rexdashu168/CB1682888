<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ å°è‚¡AIæ™ºèƒ½æŸ¥è©¢ç³»çµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* è¼‰å…¥ç•«é¢ */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            margin-top: 20px;
            font-size: 16px;
            color: #667eea;
        }

        /* é ­éƒ¨ */
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 28px;
            color: #667eea;
            margin-bottom: 10px;
        }

        .header .subtitle {
            font-size: 14px;
            color: #666;
        }

        /* æœå°‹ */
        .search-box {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .search-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
        }

        /* çµæœå€ */
        .result-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .result-container.show {
            display: block;
        }

        .company-header {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .company-name {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .company-info {
            font-size: 14px;
            opacity: 0.9;
        }

        /* ç¶­åº¦å°èˆª */
        .dimension-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .dimension-btn {
            padding: 10px 20px;
            border: none;
            background: #f5f5f5;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .dimension-btn:hover {
            background: #667eea;
            color: white;
        }

        .dimension-btn.active {
            background: #667eea;
            color: white;
        }

        /* å…§å®¹å€ */
        .content-area {
            padding: 20px;
            min-height: 200px;
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .content-card {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }

        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .data-item {
            padding: 10px;
            background: white;
            border-radius: 8px;
        }

        .data-label {
            font-size: 12px;
            color: #999;
            margin-bottom: 5px;
        }

        .data-value {
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <!-- è¼‰å…¥ç•«é¢ -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <div class="loading-text">æ­£åœ¨è¼‰å…¥è³‡æ–™...</div>
    </div>

    <div class="container">
        <!-- é ­éƒ¨ -->
        <div class="header">
            <h1>ğŸ¯ å°è‚¡AIæ™ºèƒ½æŸ¥è©¢ç³»çµ±</h1>
            <div class="subtitle">2269å®¶ä¸Šå¸‚æ«ƒ | 66ç¯‡æ·±åº¦å ±å‘Š | 1021å®¶CBå®Œæ•´è³‡è¨Š | 297å®¶CBç«¶æ‹å®Œæ•´è³‡è¨Š</div>
        </div>

        <!-- æœå°‹ -->
        <div class="search-box">
            <input type="text" class="search-input" id="searchInput" placeholder="è¼¸å…¥è‚¡ç¥¨ä»£è™Ÿæˆ–å…¬å¸åç¨±ï¼ˆå¦‚ï¼š2330 æˆ– å°ç©é›»ï¼‰">
        </div>

        <!-- çµæœå€ -->
        <div class="result-container" id="resultContainer">
            <div class="company-header" id="companyHeader"></div>
            
            <div class="dimension-nav">
                <button class="dimension-btn active" data-dim="overview">ğŸ“‹ å…¬å¸ç¸½è¦½</button>
                <button class="dimension-btn" data-dim="finance">ğŸ’° è²¡å‹™è¡¨ç¾</button>
                <button class="dimension-btn" data-dim="products">ğŸ“¦ ç”¢å“çµæ§‹</button>
                <button class="dimension-btn" data-dim="reports">ğŸ“Š ç ”ç©¶å ±å‘Š</button>
                <button class="dimension-btn" data-dim="cb">ğŸ¯ å¯è½‰å‚µ</button>
                <button class="dimension-btn" data-dim="timeline">â° é—œéµæ™‚ç¨‹</button>
            </div>

            <div class="content-area" id="contentArea"></div>
        </div>
    </div>

    <script>
        // å…¨åŸŸè®Šæ•¸
        let allData = null;
        let currentCompany = null;

        // è¼‰å…¥è³‡æ–™
        async function loadData() {
            try {
                const response = await fetch('data.json');
                if (!response.ok) {
                    throw new Error('ç„¡æ³•è¼‰å…¥è³‡æ–™æª”æ¡ˆ');
                }
                allData = await response.json();
                
                // éš±è—è¼‰å…¥ç•«é¢
                document.getElementById('loading').style.display = 'none';
                
                console.log('è³‡æ–™è¼‰å…¥å®Œæˆï¼');
                console.log('ç ”ç©¶å ±å‘Š:', allData.reports.length);
                console.log('å…¬å¸è³‡æ–™:', allData.companies.length);
                console.log('CBè³‡æ–™:', allData.cb.current.length);
                
            } catch (error) {
                console.error('è¼‰å…¥è³‡æ–™å¤±æ•—:', error);
                document.getElementById('loading').innerHTML = `
                    <div style="color: red;">âŒ è³‡æ–™è¼‰å…¥å¤±æ•—</div>
                    <div style="margin-top: 10px; font-size: 14px;">è«‹ç¢ºèª data.json æª”æ¡ˆæ˜¯å¦å­˜åœ¨</div>
                `;
            }
        }

        // æœå°‹åŠŸèƒ½
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const query = e.target.value.trim();
            if (query.length === 0) {
                document.getElementById('resultContainer').classList.remove('show');
                return;
            }

            // æœå°‹å…¬å¸
            const company = searchCompany(query);
            if (company) {
                displayCompany(company);
            }
        });

        // æœå°‹å…¬å¸
        function searchCompany(query) {
            if (!allData) return null;
            
            return allData.companies.find(c => 
                c['è‚¡ç¥¨ä»£è™Ÿ'] === query || 
                c['å…¬å¸ç°¡ç¨±']?.includes(query) ||
                c['å…¬å¸åç¨±']?.includes(query)
            );
        }

        // é¡¯ç¤ºå…¬å¸è³‡è¨Š
        function displayCompany(company) {
            currentCompany = company;
            
            // é¡¯ç¤ºçµæœå€
            document.getElementById('resultContainer').classList.add('show');
            
            // æ›´æ–°å…¬å¸æ¨™é ­
            const header = document.getElementById('companyHeader');
            header.innerHTML = `
                <div class="company-name">${company['è‚¡ç¥¨ä»£è™Ÿ']} ${company['å…¬å¸ç°¡ç¨±'] || company['å…¬å¸åç¨±']}</div>
                <div class="company-info">${company['ç”¢æ¥­åˆ¥']} | ${company['è‘£äº‹é•·']} | ${company['ç¸½ç¶“ç†']}</div>
            `;
            
            // é¡¯ç¤ºå…¬å¸ç¸½è¦½
            showOverview(company);
            
            // ç¶å®šç¶­åº¦æŒ‰éˆ•
            bindDimensionButtons();
        }

        // é¡¯ç¤ºå…¬å¸ç¸½è¦½
        function showOverview(company) {
            const content = document.getElementById('contentArea');
            content.innerHTML = `
                <div class="section-title">åŸºæœ¬è³‡æ–™</div>
                <div class="data-grid">
                    <div class="data-item">
                        <div class="data-label">ç”¢æ¥­åˆ¥</div>
                        <div class="data-value">${company['ç”¢æ¥­åˆ¥'] || '-'}</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">è‘£äº‹é•·</div>
                        <div class="data-value">${company['è‘£äº‹é•·'] || '-'}</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">ç¸½ç¶“ç†</div>
                        <div class="data-value">${company['ç¸½ç¶“ç†'] || '-'}</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">è‚¡æœ¬(å„„)</div>
                        <div class="data-value">${company['è‚¡æœ¬(å„„)'] || '-'}</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">å¸‚å€¼(å„„)</div>
                        <div class="data-value">${company['å¸‚å€¼(å„„)'] || '-'}</div>
                    </div>
                    <div class="data-item">
                        <div class="data-label">ç”¢æ¥­åˆ†é¡</div>
                        <div class="data-value">${company['ç”¢æ¥­åˆ†é¡'] || '-'}</div>
                    </div>
                </div>
            `;
        }

        // é¡¯ç¤ºå¯è½‰å‚µè³‡è¨Š
        function showCB(company) {
            const stockCode = company['è‚¡ç¥¨ä»£è™Ÿ'];
            
            // æ‰¾å‡ºè©²å…¬å¸çš„CBè³‡æ–™
            const currentCBs = allData.cb.current.filter(cb => 
                cb['è½‰æ›æ¨™çš„ä»£ç¢¼'] && cb['è½‰æ›æ¨™çš„ä»£ç¢¼'].toString() === stockCode
            );
            
            const historyCBs = allData.cb.history.filter(cb => 
                cb['è‚¡ç¥¨ä»£è™Ÿ'] && cb['è‚¡ç¥¨ä»£è™Ÿ'].toString() === stockCode
            );
            
            const bidCBs = allData.cb.bid.filter(cb => 
                cb['è‚¡ç¥¨ä»£è™Ÿ'] && cb['è‚¡ç¥¨ä»£è™Ÿ'].toString() === stockCode
            );
            
            const content = document.getElementById('contentArea');
            
            if (currentCBs.length === 0 && historyCBs.length === 0 && bidCBs.length === 0) {
                content.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ¯</div>
                        <div>è©²å…¬å¸ç„¡å¯è½‰å‚µç™¼è¡Œç´€éŒ„</div>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            // ç›®å‰æ›ç‰Œä¸­
            if (currentCBs.length > 0) {
                html += `<div class="section-title">ğŸ”¥ ç›®å‰æ›ç‰Œä¸­ï¼ˆ${currentCBs.length} æª”ï¼‰</div>`;
                currentCBs.forEach(cb => {
                    html += `
                        <div class="content-card" style="background: #e8f5e9; border-left-color: #66bb6a;">
                            <div style="font-weight: bold; color: #2e7d32; margin-bottom: 10px;">
                                ${cb['ä»£è™Ÿ']} ${cb['åç¨±']}
                            </div>
                            <div class="data-grid">
                                ${cb['è½‰æ›åƒ¹æ ¼(å…ƒ)'] ? `<div class="data-item"><div class="data-label">è½‰æ›åƒ¹</div><div class="data-value">${cb['è½‰æ›åƒ¹æ ¼(å…ƒ)']} å…ƒ</div></div>` : ''}
                                ${cb['å¯¦éš›ç™¼è¡Œç¸½é¡(ç™¾è¬)'] ? `<div class="data-item"><div class="data-label">ç™¼è¡Œé¡</div><div class="data-value">${cb['å¯¦éš›ç™¼è¡Œç¸½é¡(ç™¾è¬)']} ç™¾è¬</div></div>` : ''}
                                ${cb['æœ€æ–°é¤˜é¡(ç™¾è¬)'] ? `<div class="data-item"><div class="data-label">é¤˜é¡</div><div class="data-value">${cb['æœ€æ–°é¤˜é¡(ç™¾è¬)']} ç™¾è¬</div></div>` : ''}
                                ${cb['é‚„æœ¬å¹´é™'] ? `<div class="data-item"><div class="data-label">å¹´æœŸ</div><div class="data-value">${cb['é‚„æœ¬å¹´é™']} å¹´</div></div>` : ''}
                            </div>
                        </div>
                    `;
                });
            }
            
            // ç«¶æ‹è³‡æ–™
            if (bidCBs.length > 0) {
                html += `<div class="section-title">ğŸ“Š ç«¶æ‹è³‡æ–™ï¼ˆ${bidCBs.length} æ¬¡ï¼‰</div>`;
                bidCBs.forEach(bid => {
                    html += `
                        <div class="content-card">
                            <div style="font-weight: bold; color: #667eea; margin-bottom: 10px;">
                                ${bid['åç¨±']} - ${bid['é–‹æ¨™æ—¥æœŸ'] || ''}
                            </div>
                            <div class="data-grid">
                                ${bid['ç™¼è¡Œè¦æ¨¡'] ? `<div class="data-item"><div class="data-label">ç™¼è¡Œè¦æ¨¡</div><div class="data-value">${bid['ç™¼è¡Œè¦æ¨¡']}</div></div>` : ''}
                                ${bid['è½‰æ›åƒ¹'] ? `<div class="data-item"><div class="data-label">è½‰æ›åƒ¹</div><div class="data-value">${bid['è½‰æ›åƒ¹']} å…ƒ</div></div>` : ''}
                                ${bid['æœ€ä½å¾—æ¨™'] ? `<div class="data-item"><div class="data-label">æœ€ä½å¾—æ¨™</div><div class="data-value">${bid['æœ€ä½å¾—æ¨™']}</div></div>` : ''}
                                ${bid['æŠ•æ¨™å€æ•¸'] ? `<div class="data-item"><div class="data-label">æŠ•æ¨™å€æ•¸</div><div class="data-value">${bid['æŠ•æ¨™å€æ•¸']} å€</div></div>` : ''}
                            </div>
                        </div>
                    `;
                });
            }
            
            // æ­·å²ç´€éŒ„
            if (historyCBs.length > 0) {
                html += `<div class="section-title">ğŸ“œ æ­·å²ç™¼è¡Œç´€éŒ„ï¼ˆ${historyCBs.length} æª”ï¼‰</div>`;
                html += '<table style="width: 100%; border-collapse: collapse;">';
                html += '<tr style="background: #f5f5f5;"><th style="padding: 10px; text-align: left;">ä»£è™Ÿ</th><th style="padding: 10px; text-align: left;">åç¨±</th><th style="padding: 10px; text-align: right;">æ›ç‰Œæœ€é«˜</th><th style="padding: 10px; text-align: right;">æ›ç‰Œæœ€ä½</th></tr>';
                historyCBs.slice(0, 10).forEach(cb => {
                    html += `<tr style="border-bottom: 1px solid #eee;">
                        <td style="padding: 10px;">${cb['ä»£è™Ÿ'] || '-'}</td>
                        <td style="padding: 10px;">${cb['åç¨±'] || '-'}</td>
                        <td style="padding: 10px; text-align: right;">${cb['æ›ç‰Œæœ€é«˜'] || '-'}</td>
                        <td style="padding: 10px; text-align: right;">${cb['æ›ç‰Œæœ€ä½'] || '-'}</td>
                    </tr>`;
                });
                html += '</table>';
            }
            
            content.innerHTML = html;
        }

        // ç¶å®šç¶­åº¦æŒ‰éˆ•
        function bindDimensionButtons() {
            const buttons = document.querySelectorAll('.dimension-btn');
            buttons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // ç§»é™¤æ‰€æœ‰ active
                    buttons.forEach(b => b.classList.remove('active'));
                    // åŠ ä¸Šç•¶å‰ active
                    this.classList.add('active');
                    
                    const dim = this.getAttribute('data-dim');
                    
                    if (dim === 'overview') {
                        showOverview(currentCompany);
                    } else if (dim === 'cb') {
                        showCB(currentCompany);
                    } else {
                        document.getElementById('contentArea').innerHTML = `
                            <div class="empty-state">
                                <div class="empty-icon">ğŸš§</div>
                                <div>æ­¤åŠŸèƒ½é–‹ç™¼ä¸­...</div>
                            </div>
                        `;
                    }
                });
            });
        }

        // é é¢è¼‰å…¥æ™‚åŸ·è¡Œ
        window.addEventListener('load', loadData);
    </script>
</body>
</html>






